---
id: FEAT-0017
type: feature
status: open
stage: todo
title: '特性: 质量控制检查 (Quality Control Check)'
created_at: '2026-01-11T13:41:18.578040'
opened_at: '2026-01-11T13:41:18.578027'
updated_at: '2026-01-11T13:41:18.578041'
parent: EPIC-0001
dependencies: []
related: []
tags: []
---

## FEAT-0017: 质量控制检查 (Quality Control Check)

## 目标 (Objective)

实现 `monoco check` 作为质量控制任务（Lint, Test, Type Check）的统一入口。
该命令必须充当一个任务运行器 (Task Runner)，读取 `monoco.yaml` 中的定义，为项目质量标准提供确定性的 "单一真实源 (Source of Truth)"。
这种设计避免了 Git Hooks 对 Agent 来说存在的隐蔽复杂性，同时也允许 Hooks 复用此命令。

## 验收标准 (Acceptance Criteria)

1.  **配置驱动 (Config-Driven)**: `monoco.yaml` 支持 `check` 字段定义任务。
    ```yaml
    check:
      lint: "pdm run ruff check ."
      format: "pdm run ruff format --check ."
      test: "pdm run pytest"
    ```
2.  **统一运行器 (Unified Runner)**: `monoco check` 按顺序（或在可能的情况下并行）运行所有定义的任务。
3.  **选择性运行 (Selective Run)**: 支持 `monoco check <task_name>`（例如 `monoco check lint`）以运行特定检查。
4.  **Agent 友好输出 (Agent-Friendly Output)**: 支持 `--json` 标志以返回聚合结果，包括每个任务的 stdout/stderr 和退出代码。
5.  **快速失败 (Fail Fast)**: 如果某个任务失败，命令将以非零代码退出（除非使用了 `--no-fail-fast`）。

## 技术任务 (Technical Tasks)

- [ ] **Config Schema**: 更新 `core/config.py` 中的 `MonocoConfig` 以包含 `CheckConfig` (Dict[str, str])。
- [ ] **Command Implementation**: 创建 `monoco/features/check/commands.py` 并实现 `check` 命令。
- [ ] **Runner Logic**: 实现 `core/runner.py` 或类似逻辑以执行 Shell 命令并捕获输出。
- [ ] **JSON Output**: 确保执行结果的结构化报告。
- [ ] **Integration Test**: 验证 `monoco check` 正确读取 `monoco.yaml` 并执行模拟命令。